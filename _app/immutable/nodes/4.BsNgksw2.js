import"../chunks/DsnmJJEf.js";import{o as oe}from"../chunks/gbYxsZB_.js";import{aA as re,A as ie,aB as le,b as A,d as t,r as a,s as i,n as de,a as y,at as ce,aC as j,aD as G,au as ve,aE as s,a4 as l,f as X,t as H,aF as fe,aG as ue}from"../chunks/C-gs-iae.js";import{d as J,s as T}from"../chunks/wxm0C4lC.js";import{i as C}from"../chunks/CnxwoPbd.js";import{H as pe,e as he,i as me}from"../chunks/DM8VPrPX.js";import{s as _e}from"../chunks/BdCIIA9t.js";import{b as ge}from"../chunks/BdFlcfQT.js";function be(p,o,c=o){re(p,"change",()=>{c(p.files)}),ie&&p.files&&c(p.files),le(()=>{p.files=o()})}var xe=A('<div class="fixed inset-0 bg-[#7777] backdrop-filter-[blur(4px)] pt-20 z-999"><div class="p-2 m-auto w-90 rounded-sm shadow-md bg-[#fff]"><div class="flex justify-end"><button class="text-lg !bg-[transparent] !text-[#333] !p-1">&times;</button></div> <p><!></p></div></div>');function je(p,o){var c=xe(),f=t(c),v=t(f),h=t(v);h.__click=function(...u){o.onClose?.apply(this,u)},a(v);var w=i(v,2),g=t(w);_e(g,()=>o.children??de),a(w),a(f),a(c),y(p,c)}J(["click"]);async function ye(p,o,c,f,v,h,w){o.length=0;const g=c(l(f));s(v,[...new Set(g)],!0),l(v).forEach(async u=>{o.push({emoji:u,count:g.filter(_=>u.charCodeAt()===_.charCodeAt()).length})}),o.sort((u,_)=>_.count-u.count),o.length===0&&(s(h,!0),s(w,"I could not find emojis in here, ensure you uploaded a TXT file of an exported WhatsApp chat. If you are sure you did, you lot don't use emojis when chatting eh?"))}var we=A('<div><form><div><p class="text-center">Upload your exported WhatsApp chats.</p></div> <div class="p-3 flex flex-column justify-center items-center"><label for="chat">Upload &uarr; <input type="file" name="chat" id="chat" class="!hidden"/></label></div></form></div>'),ke=A('<div class="flex flex-col justify-center items-center"><p class="text-center"><em> </em></p> <div class="p-2"><button>Count Emojis</button></div></div> <div class="p-2"><button>Upload a different chat</button></div>',1),Ae=(p,o,c)=>{l(o)==="ascending"?(s(o,"descending"),c.sort((f,v)=>v.count-f.count)):(s(o,"ascending"),c.sort((f,v)=>f.count-v.count))},Ce=A('<p class="flex p-1 w-[80dvw] rounded-sm even:bg-[#ccc7]"><span class="svelte-2j7mc4"> </span> <span class="svelte-2j7mc4"> </span></p>'),Ee=A('<div class="max-h-[65dvh] overflow-auto"><div class="sticky top-0 left-0 right-0 bg-[#fff] shadow-sm"><h3 class="text-center text-xl font-bold">Emojis found in chat</h3> <p class="flex justify-end"><button class="!bg-[transparent] !text-[var(--button-primary)] text-md">Change order</button></p></div> <p class="flex p-1 w-[80dvw] rounded-sm even:bg-[#ccc7]"><span class="svelte-2j7mc4">Emoji</span> <span class="svelte-2j7mc4">Usage</span></p> <!></div> <div class="mt-4 p-2 flex flex-col justify-around items-center h-[8rem]"><button>Share stats</button> <button>Upload another chat</button></div>',1),Ue=A('<section><!> <div class="p-2 grid place-items-center h-[100%]"><!> <!> <!></div> <!> <!></section>');function He(p,o){ce(o,!0);const c=Intl.NumberFormat("en-US",{style:"decimal",useGrouping:!0});let f=[],v=j(G([])),h=G([]),w=j(G([])),g=j(void 0),u=j(void 0),_=j(""),I=j("descending"),b=j(!0),E=j("Loading Unicode Emoji list. Please wait");oe(()=>{const e=new XMLHttpRequest;e.open("GET",`${ge}/array.json`),e.onload=function(){e.status===200?s(v,JSON.parse(e.responseText).emojis,!0):(s(b,!0),s(E,"An error occured. Failed to load Unicode Emoji List"))},e.onloadend=function(){s(b,!1)},e.send()});function O(e){s(u,e.target.files[0],!0);const r=new FileReader;s(E,"Loading file..."),s(b,!0),r.onload=async function(n){s(_,await n.target.result,!0),s(b,!1)},r.readAsText(l(u))}function K(e){alert("Analyzing and counting... Depending on how large the chat it, this might take a while.");const r=e.replace(/\d/g,"").split("").filter(n=>n!==" ");return l(v).forEach((n,d)=>{const m=r.filter(x=>x.charCodeAt()===n.charCodeAt());f.push(...m)}),f}function R(){f.length=0,h.length=0,s(_,""),s(I,"descending"),s(g,void 0),s(u,void 0)}var $=Ue(),q=t($);pe(q,{label:"TextMoji"});var M=i(q,2),B=t(M);{var Q=e=>{var r=we(),n=t(r),d=i(t(n),2),m=t(d),x=i(t(m));x.__change=O,a(m),a(d),a(n),a(r),be(x,()=>l(g),k=>s(g,k)),y(e,r)};C(B,e=>{l(_)===""&&e(Q)})}var D=i(B,2);{var V=e=>{var r=ke(),n=X(r),d=t(n),m=t(d),x=t(m);a(m),a(d);var k=i(d,2),U=t(k);U.__click=[ye,h,K,_,w,b,E],a(k),a(n);var F=i(n,2),L=t(F);L.__click=R,a(F),H(()=>T(x,`${l(u).name??""} (${l(u).size??""} Bytes)`)),y(e,r)};C(D,e=>{l(_)!==""&&h.length===0&&l(b)===!1&&e(V)})}var Y=i(D,2);{var Z=e=>{var r=Ee(),n=X(r),d=t(n),m=i(t(d),2),x=t(m);x.__click=[Ae,I,h],a(m),a(d);var k=i(d,4);he(k,17,()=>h,me,(L,P)=>{var S=Ce(),z=t(S),ae=t(z,!0);a(z);var W=i(z,2),se=t(W,!0);a(W),a(S),H(ne=>{T(ae,l(P).emoji),T(se,ne)},[()=>c.format(l(P).count)]),y(L,S)}),a(n);var U=i(n,2),F=i(t(U),2);F.__click=R,a(U),y(e,r)};C(Y,e=>{h.length!==0&&e(Z)})}a(M);var N=i(M,2);{var ee=e=>{je(e,{onClose:()=>s(b,!1),children:(r,n)=>{fe();var d=ue();H(()=>T(d,l(E))),y(r,d)}})};C(N,e=>{l(b)&&e(ee)})}var te=i(N,2);C(te,e=>{}),a($),y(p,$),ve()}J(["change","click"]);export{He as component};
