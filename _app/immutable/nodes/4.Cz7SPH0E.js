import"../chunks/DsnmJJEf.js";import{o as ce}from"../chunks/gbYxsZB_.js";import{aA as ve,A as fe,aB as ue,b as j,d as t,r as a,s as l,n as pe,a as x,at as me,aC as h,aD as I,au as he,aE as s,a4 as i,f as O,t as P,aF as _e,aG as ge}from"../chunks/C-gs-iae.js";import{d as K,s as U}from"../chunks/wxm0C4lC.js";import{i as w}from"../chunks/CnxwoPbd.js";import{H as xe,e as be,i as je}from"../chunks/DM8VPrPX.js";import{s as ye}from"../chunks/BdCIIA9t.js";function we(f,d,c=d){ve(f,"change",()=>{c(f.files)}),fe&&f.files&&c(f.files),ue(()=>{f.files=d()})}var Ee=j('<div class="fixed inset-0 bg-[#7777] backdrop-filter-[blur(4px)] pt-20 z-999"><div class="p-2 m-auto w-90 rounded-sm shadow-md bg-[#fff]"><div class="flex justify-end"><button class="text-lg !bg-[transparent] !text-[#333] !p-1">&times;</button></div> <p><!></p></div></div>');function ke(f,d){var c=Ee(),u=t(c),p=t(u),v=t(p);v.__click=function(...b){d.onClose?.apply(this,b)},a(p);var E=l(p,2),k=t(E);ye(k,()=>d.children??pe),a(E),a(u),a(c),x(f,c)}K(["click"]);var Ce=j('<div><form><div><p class="text-center">Upload your exported WhatsApp chats.</p></div> <div class="p-3 flex flex-column justify-center items-center"><label for="chat" class="p-2 bg-[#0505ff] text-[#fff] rounded-sm">Upload &uarr; <input type="file" name="chat" id="chat" class="!hidden"/></label></div></form></div>'),Ae=async(f,d,c)=>{alert(),s(d,!0);try{await c()}finally{s(d,!1)}},Ue=j('<div class="flex flex-col justify-center items-center"><p class="text-center"><em> </em></p> <div class="p-2"><button>Count Emojis</button></div></div> <div class="p-2"><button> </button></div>',1),Te=j("<p>Wait up</p>"),Fe=(f,d,c)=>{i(d)==="ascending"?(s(d,"descending"),c.sort((u,p)=>p.count-u.count)):(s(d,"ascending"),c.sort((u,p)=>u.count-p.count))},Me=j('<p class="flex p-1 w-[80dvw] rounded-sm even:bg-[#ccc7]"><span class="svelte-2j7mc4"> </span> <span class="svelte-2j7mc4"> </span></p>'),Se=j('<div class="max-h-[65dvh] overflow-auto"><div class="sticky top-0 left-0 right-0 bg-[#fff] shadow-sm"><h3 class="text-center text-xl font-bold">Emojis found in chat</h3> <p class="flex justify-end"><button class="!bg-[transparent] !text-[var(--button-primary)] text-md">Change order</button></p></div> <p class="flex p-1 w-[80dvw] rounded-sm even:bg-[#ccc7]"><span class="svelte-2j7mc4">Emoji</span> <span class="svelte-2j7mc4">Usage</span></p> <!></div> <div class="mt-4 p-2 flex flex-col justify-around items-center h-[8rem]"><button>Share stats</button> <button>Upload another chat</button></div>',1),$e=j('<section><!> <div class="p-2 grid place-items-center h-[100%]"><!> <!> <!> <!></div> <!> <!></section>');function We(f,d){me(d,!0);const c=Intl.NumberFormat("en-US",{style:"decimal",useGrouping:!0});let u=[],p=h(I([])),v=I([]),E=h(I([])),k=h(void 0),b=h(void 0),C=h(""),R=h("descending"),_=h(!0),Q=h(""),T=h("Loading Unicode Emoji list. Please wait"),$=h(!1);ce(()=>{const e=new XMLHttpRequest;e.open("GET","/array.json"),e.onload=function(){e.status===200?s(p,JSON.parse(e.responseText).emojis,!0):(s(_,!0),s(T,"An error occured. Failed to load Unicode Emoji List"))},e.onloadend=function(){s(_,!1)},e.send()});function V(e){s(b,e.target.files[0],!0);const n=new FileReader;s(T,"Loading file..."),s(_,!0),n.onload=async function(o){s(C,await o.target.result,!0),s(_,!1)},n.readAsText(i(b))}function Y(e){s(Q,"Counting... hang on, this might take a while");const n=e.replace(/\d/g,"").split("").filter(o=>o!==" ");return i(p).forEach((o,r)=>{const m=n.filter(g=>g.charCodeAt()===o.charCodeAt());u.push(...m)}),u}function Z(){return new Promise(e=>{v.length=0;const n=Y(i(C));s(E,[...new Set(n)],!0),i(E).forEach(async o=>{v.push({emoji:o,count:n.filter(r=>o.charCodeAt()===r.charCodeAt()).length})}),v.sort((o,r)=>r.count-o.count),v.length===0&&(s(_,!0),s(T,"I could not find emojis in here, ensure you uploaded a TXT file of an exported WhatsApp chat. If you are sure you did, you lot don't use emojis when chatting eh?")),e(v)})}function W(){u.length=0,v.length=0,s(C,""),s(R,"descending"),s(k,void 0),s(b,void 0)}var L=$e(),z=t(L);xe(z,{label:"TextMoji"});var q=l(z,2),B=t(q);{var ee=e=>{var n=Ce(),o=t(n),r=l(t(o),2),m=t(r),g=l(t(m));g.__change=V,a(m),a(r),a(o),a(n),we(g,()=>i(k),y=>s(k,y)),x(e,n)};w(B,e=>{i(C)===""&&e(ee)})}var N=l(B,2);{var te=e=>{var n=Ue(),o=O(n),r=t(o),m=t(r),g=t(m);a(m),a(r);var y=l(r,2),F=t(y);F.__click=[Ae,$,Z],a(y),a(o);var M=l(o,2),A=t(M);A.__click=W;var S=t(A,!0);a(A),a(M),P(()=>{U(g,`${i(b).name??""} (${i(b).size??""} Bytes)`),U(S,i($)?"Shit":"Upload a different chat")}),x(e,n)};w(N,e=>{i(C)!==""&&v.length===0&&i(_)===!1&&e(te)})}var X=l(N,2);{var ae=e=>{var n=Te();x(e,n)};w(X,e=>{i($)&&e(ae)})}var se=l(X,2);{var oe=e=>{var n=Se(),o=O(n),r=t(o),m=l(t(r),2),g=t(m);g.__click=[Fe,R,v],a(m),a(r);var y=l(r,4);be(y,17,()=>v,je,(A,S)=>{var G=Me(),H=t(G),ie=t(H,!0);a(H);var J=l(H,2),le=t(J,!0);a(J),a(G),P(de=>{U(ie,i(S).emoji),U(le,de)},[()=>c.format(i(S).count)]),x(A,G)}),a(o);var F=l(o,2),M=l(t(F),2);M.__click=W,a(F),x(e,n)};w(se,e=>{v.length!==0&&e(oe)})}a(q);var D=l(q,2);{var ne=e=>{ke(e,{onClose:()=>s(_,!1),children:(n,o)=>{_e();var r=ge();P(()=>U(r,i(T))),x(n,r)}})};w(D,e=>{i(_)&&e(ne)})}var re=l(D,2);w(re,e=>{}),a(L),x(f,L),he()}K(["change","click"]);export{We as component};
